<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/lint/lint.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/theme/neo.css"
    />
    <link rel="stylesheet" type="text/css" href="./css/example.css" />
    <link rel="stylesheet" href="../dist/toastui-chart.css" />
    <title>19.10 [Gauge Chart] Clock</title>
  </head>
  <body>
    <div class="description">
      You can see the tutorial
      <a href="https://github.com/nhn/tui.chart/blob/main/docs/en/chart-radialBar.md" target="_blank">here</a>
      <br />
      <strong
        >The example code can be slower than your environment because the code is transpiled by
        babel-standalone in runtime.</strong
      >
    </div>
    <div class="wrap">
      <div class="code-html" id="code-html">
        <div id="chart-area"></div>
      </div>
      <div class="custom-area">
        <div id="error-dim">
          <span id="error-text"></span>
          <div id="error-stack"></div>
          <span id="go-to-dev-tool"
            >For more detail, open browser's developer tool and check it out.</span
          >
        </div>
        <div class="try-it-area">
          <h3>try it</h3>
          <textarea id="code"></textarea>
          <div class="apply-btn-area">
            <button class="btn" onclick="evaluationCode(chartCM, codeString);">Run it!</button>
          </div>
        </div>
      </div>
    </div>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
    <script src="../dist/toastui-chart.js"></script>
    <script class="code-js" id="code-js" type="text/babel">
      const el = document.getElementById('chart-area');

      function getCurrentTime() {
        const currentDate = new Date();
        const hour = currentDate.getHours();

        return {
          hour: hour > 12 ? hour - 12 : hour,
          min: currentDate.getMinutes(),
          sec: currentDate.getSeconds(),
        };
      }

      function timeFormatter(value) {
        return `${value.toString().padStart(2, '0')}`;
      }

      const { hour, min, sec } = getCurrentTime();
      const data = {
        series: [
          {
            name: 'Speed',
            data: [hour * 5, min, sec],
          },
        ],
      };

      const options = {
        chart: { width: 550, height: 500, animation: { duration: 0 }  },
        circularAxis: {
          tick: { interval: 5 },
          label: {
            margin: 15,
            interval: 5,
            formatter: (value) => (Number(value) === 0 ? '12' : `${Number(value) / 5}`),
          },
          scale: { stepSize: 1, min: 0, max: 59 },
        },
        plot: {
          bands: [{ range: [0, 60], color: '#ffc107' }],
        },
        series: {
          dataLabels: {
            visible: true,
            offsetY: 80,
            formatter: (value, dataLabelData) => {
              const [h, m, s] = dataLabelData;

              return `${timeFormatter(h / 5)}:${timeFormatter(m)}:${timeFormatter(s)}`;
            },
          },
        },
        exportMenu: { visible: false },
        theme: {
          series: {
            clockHand: { size: ['50%', '80%', '95%'] },
            dataLabels: {
              fontFamily: 'Impact',
              fontWeight: 500,
              fontSize: 30,
              textBubble: {
                visible: true,
                borderRadius: 0,
              },
            },
          },
          plot: { bands: { barWidth: 20 } },
        },
      };

      const chart = toastui.Chart.gaugeChart({ el, data, options });

      setInterval(() => {
        const { hour: h, min: m, sec: s } = getCurrentTime();

        chart.setData({
          series: [
            {
              name: 'Speed',
              data: [h * 5, m, s],
            },
          ],
        });
      }, 1000);

    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.0/codemirror.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.0/addon/edit/matchbrackets.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.0/addon/selection/active-line.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.0/mode/javascript/javascript.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.0/addon/lint/lint.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.0/addon/lint/javascript-lint.js"></script>
    <script src="./js/example.js" type="text/babel"></script>
  </body>
</html>
